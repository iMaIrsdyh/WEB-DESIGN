<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home | Website Pribadi</title>
    <link rel="stylesheet" href="css/home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <!-- APP ICONS & MANIFEST -->
    <link rel="icon" type="image/png" sizes="192x192" href="icon/iMaBrand192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon/iMaBrand512.png">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff4ecd">
</head>

<body>
    <nav>
        <div class="brand">
            <img src="icon/iMaBrand512.png" alt="iMa Logo"
                style="height:38px;width:38px;border-radius:12px;vertical-align:middle;">
        </div>
        <a href="index.html" class="active">Home</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        <form class="search-form" action="#" method="get">
            <input class="search-input" type="text" name="q" placeholder="Cari...">
            <button class="search-button" type="submit">Search</button>
        </form>
    </nav>

    <main class="main-section">
        <section class="main-content">
            <div class="subtitle">Saya</div>
            <div class="title">KARIMAH IRSYADIYAH</div>
            <div class="desc">
                Mahasiswa Informatika Universitas Andalas.<br>
                Di era digital yang dinamis, saya siap beradaptasi, belajar, dan berinovasi dalam pengembangan web dan
                teknologi informasi.
            </div>
            <button class="cta-btn" onclick="window.location.href='contact.html'">Hubungi Saya</button>
            <div class="socials">
                <a href="https://www.instagram.com/ima_irsdyh/" target="_blank" aria-label="Instagram"><i
                        class="fab fa-instagram"></i></a>
                <a href="https://id.linkedin.com/in/karimah-irsyadiyah-1605092a5" target="_blank"
                    aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
            </div>
        </section>
        <section class="main-visual">
            <div class="blob"></div>
        </section>
    </main>

    <div class="scroll-down"><i class="fa-solid fa-angle-down"></i></div>

    <!-- PWA Install Script -->
    <script>
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;

            // Buat tombol install
            const installBtn = document.createElement('button');
            installBtn.textContent = 'Install iMa App';
            installBtn.setAttribute('aria-label', 'install');
            Object.assign(installBtn.style, {
                position: 'fixed',
                bottom: '20px',
                right: '20px',
                zIndex: '9999',
                padding: '12px 20px',
                background: '#ff4ecd',
                color: 'white',
                border: 'none',
                borderRadius: '10px',
                cursor: 'pointer',
                boxShadow: '0 4px 8px rgba(0,0,0,0.2)',
            });

            document.body.appendChild(installBtn);

            installBtn.addEventListener('click', async () => {
                installBtn.remove();
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                console.log(outcome === 'accepted'
                    ? '‚úÖ Pengguna setuju meng-install PWA'
                    : '‚ùå Pengguna menolak install');
                deferredPrompt = null;
            });
        });

        window.addEventListener('appinstalled', () => {
            console.log('üéâ PWA sudah di-install');
            const installBtn = document.querySelector('button[aria-label="install"]');
            if (installBtn) installBtn.remove();
        });
    </script>

    <!-- Info PWA -->
    <section class="pwa-info">
        <div class="pwa-card">
            <div class="pwa-icon"><i class="fa-solid fa-mobile-screen-button"></i></div>
            <div class="pwa-content">
                <div class="pwa-title">
                    Website ini sudah menjadi <strong>Progressive Web App (PWA)</strong>!
                </div>
                <div class="pwa-desc">
                    Kamu bisa <b>menginstalnya</b> di perangkatmu dan tetap mengaksesnya walau tanpa internet.
                </div>
            </div>
        </div>
    </section>

    <!-- Register Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(reg => console.log('‚úÖ Service Worker terdaftar:', reg))
                .catch(err => console.log('‚ùå Gagal daftar Service Worker:', err));
        }
    </script>
</body>

</html>